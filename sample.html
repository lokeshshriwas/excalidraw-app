<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body style="background-color: black;">
    <canvas id="myCanvas" width="800" height="600" style="border:1px solid gray;"></canvas>
    <button id="drawBtn">Draw</button>
    <button id="eraseBtn">Erase</button>
  </body>
</html>

<script>
  const canvas = document.getElementById("myCanvas");
  const ctx = canvas.getContext("2d");
  const drawBtn = document.getElementById("drawBtn");
  const eraseBtn = document.getElementById("eraseBtn");

  let isDrawing = false;
  let isErasing = false;

  // Set initial drawing style
  ctx.lineWidth = 15;
  ctx.lineCap = "round";
  ctx.strokeStyle = "red";

  // Event listeners for drawing/erasing
  canvas.addEventListener("mousedown", (e) => {
    if (isErasing) {
      isDrawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    } else {
      isDrawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    }
  });

  canvas.addEventListener("mousemove", (e) => {
    if (!isDrawing) return;

    if (isErasing) {
      ctx.globalCompositeOperation = "destination-out"; // Set for erasing
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
    } else {
      ctx.globalCompositeOperation = "source-over"; // Set for drawing
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
    }
  });

  canvas.addEventListener("mouseup", () => {
    isDrawing = false;
    ctx.globalCompositeOperation = "source-over"; // Reset to default after erasing
  });

  // Button click handlers
  drawBtn.addEventListener("click", () => {
    isErasing = false;
    ctx.strokeStyle = "red"; // Set drawing color
  });

  eraseBtn.addEventListener("click", () => {
    isErasing = true;
    // The strokeStyle is effectively ignored when erasing with 'destination-out'
  });
</script>
